(function(){var bd=NEJ.P,ce=NEJ.O,bb=bd("nej.e"),bi=bd("nej.v"),bm=bd("nej.u"),bI=bd("nej.ut"),ej=bd("nm.u"),bc,bP;ej.AP=NEJ.C();bc=ej.AP.bR(bI.ek);bc.dv=function(){this.dC();bb.pm({src:"http://music.163.com/style/swf/CloudMusicPlayer.swf?v=2014060988888",hidden:true,parent:document.body,params:{flashvars:"hostname="+location.hostname,allowscriptaccess:"always",wmode:"transparent"},onready:this.yA.bh(this)});window.onIoError=this.tx.bh(this);window.onLoadProgress=this.tB.bh(this);window.onPlayProgress=this.qq.bh(this);window.onPlayComplete=this.bvQ.bh(this)};bc.cL=function(){this.qZ();this.bOU()};bc.yA=function(gO){this.cH=gO;if(typeof console==="undefined"){console={}}console.aslog=this.bvN.bh(this);this.mZ(this.bvL);this.gx(this.is)};bc.bvN=function(cU){this.cH.as_postMessage(cU)};bc.qZ=function(){delete this.is;if(this.cH){this.cH.as_stop();this.cH.as_clear()}};bc.tx=function(cZ){this.bN("onplayerror",{name:"ioerror",code:cZ})};bc.tB=function(oZ,dF){if(this.gY<1)return;this.bN("onloadprogress",{loaded:oZ/1e3,duration:dF/1e3})};bc.qq=function(bvK,dF){this.gY=dF;this.bN("onplayprogress",{current:bvK/1e3,duration:dF/1e3})};bc.bvQ=function(bl){this.bN("onstatechange",{state:4})};bc.gx=function(ep,bej,yt){this.qZ();if(!ep)return;this.is=ep;this.gY=0;if(this.cH){this.cH.as_addSong({id:bej,url:this.is});if(yt===undefined)yt=true;if(yt){this.cH.as_play();this.bN("onstatechange",{state:1})}}};bc.hO=function(){if(this.cH&&this.is){this.cH.as_pause();this.bN("onstatechange",{state:2})}};bc.mQ=function(){if(this.cH&&this.is){this.cH.as_play();this.bN("onstatechange",{state:1})}};bc.cr=function(){this.qZ();this.bN("onstatechange",{state:3})};bc.ou=function(iu){if(!this.cH||!this.is)return;this.cH.as_setPosition(this.gY*iu);this.cH.currentTime=this.cH.duration*iu};bc.bvS=function(EN){if(this.cH)this.cH.as_setMuted(!!EN);this.bN("onmutedchange",{muted:EN})};bc.mZ=function(bB){this.bvL=bB;if(this.cH)this.cH.as_setVolume(bB);this.bN("onvolumechange",{value:bB})};bc.sj=function(){return this.cH&&this.cH.as_isPlaying()}})();
(function(){var bd=NEJ.P,ce=NEJ.O,bb=bd("nej.e"),bi=bd("nej.v"),bm=bd("nej.u"),bI=bd("nej.ut"),ej=bd("nm.u"),bc,bP;ej.Gh=NEJ.C();bc=ej.Gh.bR(bI.ek);bc.dv=function(){var WM=function(bW){bi.bv(this.cH,bW,this.bvT.bh(this,bW))};return function(){this.dC();this.cH=new Audio;this.ko=["play","pause","ended","playing","progress","loadeddata","timeupdate","error","emptied"];bm.cz(this.ko,WM,this);this.RN=0;this.FC=0}}();bc.cL=function(){this.qZ();this.cR()};bc.qZ=function(){if(!this.cH.currentSrc)return;this.MX();try{this.cH.currentTime=0}catch(e){}this.cH.pause();this.cH.src=""};bc.bvT=function(bW){switch(bW){case"play":case"loadeddata":if(bW=="loadeddata")this.MX();this.bN("onstatechange",{state:0});break;case"pause":this.bN("onstatechange",{state:2});break;case"ended":this.bN("onstatechange",{state:4});break;case"playing":this.bN("onstatechange",{state:1});break;case"progress":if(!this.cH.buffered.length)return;var bb=this.cH.buffered.end(0);this.bN("onloadprogress",{loaded:bb,duration:this.cH.duration});break;case"timeupdate":this.bN("onplayprogress",{current:this.cH.currentTime,duration:this.cH.duration});break;case"emptied":break;case"error":var cZ=this.cH.error,cD=this.cH.currentSrc,MW=this.cH.currentTime;if(cZ){switch(cZ.code){case cZ.MEDIA_ERR_ABORTED:case cZ.MEDIA_ERR_DECODE:case cZ.MEDIA_ERR_ENCRYPTED:this.bN("onplayerror",{error:cZ.code,src:cD,time:MW});break;case cZ.MEDIA_ERR_NETWORK:this.RR(cD,MW);break;case cZ.MEDIA_ERR_SRC_NOT_SUPPORTED:if(!!this.cH.src&&this.cH.src!="http://"+location.host+"/"&&this.cH.src.indexOf("#")<0){this.bN("onplayerror",{error:cZ.code,src:cD,time:MW})}break;default:this.bN("onplayerror",{error:-1,src:cD,time:MW});break}}break}};bc.gx=function(ep,bej,yt){this.MX();this.cH.src=ep;if(yt===undefined)yt=true;if(yt){this.cH.play()}};bc.MX=function(){this.FC=0;this.RN=clearTimeout(this.RN)};bc.RR=function(ep,RT){if(!ep||this.FC>5){if(this.FC>5)this.bN("onplayerror",{error:2,src:ep,time:RT});this.MX();return}if(this.FC>0){var bt=ep.indexOf("#");ep=bt>=0?ep.substring(0,bt):ep;this.cH.src=ep+"#t="+RT;this.cH.play()}this.FC++;this.RN=setTimeout(arguments.callee.bh(this,ep,RT),5e3)};bc.hO=function(){this.cH.pause()};bc.mQ=function(){this.cH.play()};bc.cr=function(){this.qZ();this.bN("onstatechange",{state:3})};bc.ou=function(iu){if(!this.cH.currentSrc)return;this.cH.currentTime=this.cH.duration*iu};bc.bvS=function(EN){this.cH.muted=!!EN;this.bN("onmutedchange",{muted:EN})};bc.mZ=function(bB){this.cH.volume=bB;this.bN("onvolumechange",{value:bB})};bc.sj=function(){return this.cH.currentTime>0&&!this.cH.ended&&!this.cH.paused}})();
(function(){var bd=NEJ.P,ce=NEJ.O,fN=NEJ.R,bb=bd("nej.e"),bi=bd("nej.v"),bF=bd("nej.ut"),wh;if(!!bF.MI)return;bF.MI=NEJ.C();wh=bF.MI.bR(bF.ek);wh.dv=function(){this.iZ={onchange:this.wd.bh(this),ondragend:this.wd.gD(this,!0)};this.dC()};wh.cB=function(bf){this.cC(bf);this.iZ.view=bb.bD(bf.track);this.iZ.body=bb.bD(bf.slide);this.iZ.mbar=this.iZ.view;this.Sn(bf.range);this.de([[this.iZ.view,"mousedown",this.bvJ.bh(this)]]);this.mX=bF.zH.bG(this.iZ)};wh.cL=function(){this.cR();this.mX.bV();delete this.mX;delete this.kj;delete this.iZ.view;delete this.iZ.body;delete this.iZ.mbar};wh.wd=function(be,jK){var beJ=be.left/this.kj.x[1],beK=be.top/this.kj.y[1],beL=this.kj.x,beM=this.kj.y;this.bN("onchange",{stopped:!!jK,x:{rate:beJ,value:beJ*(beL[1]-beL[0])},y:{rate:beK,value:beK*(beM[1]-beM[0])}})};wh.bvJ=function(be){var cw=bb.lQ(this.iZ.view),beN={x:bi.nl(be),y:bi.qx(be)},dV={x:Math.floor(this.iZ.body.offsetWidth/2),y:Math.floor(this.iZ.body.offsetHeight/2)};this.mX.gn({top:beN.y-cw.y-dV.y,left:beN.x-cw.x-dV.x})};wh.Sn=function(hQ){var pb;if(!!this.kj){var lS=this.mX.Uv();pb={x:lS.left/this.kj.x[1],y:lS.top/this.kj.y[1]}}hQ=hQ||ce;var bvI=(hQ.x||fN)[1]||this.iZ.view.clientWidth-this.iZ.body.offsetWidth,bvF=(hQ.y||fN)[1]||this.iZ.view.clientHeight-this.iZ.body.offsetHeight;this.kj={x:hQ.x||[0,bvI],y:hQ.y||[0,bvF]};if(!!pb)this.gn(pb);return this};wh.gn=function(pb){pb=pb||ce;this.mX.gn({top:this.kj.y[1]*(pb.y||0),left:this.kj.x[1]*(pb.x||0)})}})();
(function(){var bF=NEJ.P("nej.ut"),beR;if(!!bF.At)return;bF.At=NEJ.C();beR=bF.At.bR(bF.MI);beR.dv=function(){this.dC();this.iZ.direction=2}})();
(function(){var bd=NEJ.P,bb=bd("nej.e"),bi=bd("nej.v"),bF=bd("nej.p"),dY=bd("nej.ui"),gc=bd("nej.ut"),bT=bd("nm.w"),bc,bP;bT.uo=NEJ.C();bc=bT.uo.bR(dY.fW);bP=bT.uo.dI;bc.dv=function(){this.dC()};bc.cB=function(bf){this.cC(bf);this.bs=bb.bD(bf.content);this.ke=bb.bD(bf.slide);this.is=bb.bD(bf.track);this.bgn=bf.speed;this.TD=this.bs.scrollHeight-this.bs.clientHeight;bb.ch(this.ke,"height",(this.bs.clientHeight/this.bs.scrollHeight*parseInt(bb.eG(this.is,"height"))||0)+"px");if(this.bs.scrollHeight<=this.bs.clientHeight)bb.ch(this.ke,"display","none");else bb.ch(this.ke,"display","block");this.qS=gc.At.bG({slide:this.ke,track:this.is,onchange:this.TF.bh(this)});if(bF.dU.browser!="firefox")this.de([[this.bs,"mousewheel",this.xr.bh(this)]]);else{this.bs.addEventListener("DOMMouseScroll",this.xr.bh(this),false)}};bc.cL=function(){this.cR();this.qS.bV();delete this.bs;delete this.ke;delete this.is;delete this.kj;delete this.bgn};bc.TF=function(be){this.bs.scrollTop=parseInt(this.TD*be.y.rate)};bc.xr=function(be){bi.dc(be);this.TD=this.bs.scrollHeight-this.bs.clientHeight;var dV=0,BF,eb,hf;eb=parseInt(this.is.clientHeight)-parseInt(bb.eG(this.ke,"height"));dV=be.wheelDelta?be.wheelDelta/120:-be.detail/3;BF=parseInt(bb.eG(this.ke,"top"))-dV*this.bgn;if(BF<0)BF=0;if(BF>eb)BF=eb;bb.ch(this.ke,"top",BF+"px");hf=parseInt(bb.eG(this.ke,"top"));this.qS.bN("onchange",{y:{rate:hf/eb}})};bc.ng=function(){this.TD=this.bs.scrollHeight-this.bs.clientHeight;this.qS.gn({x:0,y:0});bb.ch(this.ke,"height",this.bs.clientHeight/this.bs.scrollHeight*parseInt(this.is.clientHeight)+"px");this.qS.Sn({x:[],y:[0,this.is.clientHeight-parseInt(bb.eG(this.ke,"height"))]});if(this.bs.scrollHeight<=this.bs.clientHeight)bb.ch(this.ke,"display","none");else bb.ch(this.ke,"display","block")};bc.gn=function(gB){this.qS.gn(gB)};bc.Br=function(TJ){var bvi=parseInt(bb.eG(this.ke,"height"));var bvh=parseInt(bb.eG(this.is,"height"));var yY=bvh-bvi;var hf=parseInt(yY*TJ)+"px";bb.ch(this.ke,"top",hf)};bc.bgy=function(){if(this.bs.scrollHeight<=this.bs.clientHeight)return;var TJ=this.bs.scrollTop/(this.bs.scrollHeight-this.bs.clientHeight);this.Br(TJ)};bc.bPb=function(){if(this.qS)this.qS.Sn()}})();
(function(){var bd=NEJ.P,bb=bd("nej.e"),bi=bd("nej.v"),bF=bd("nej.ut"),sm;bF.zc=NEJ.C();sm=bF.zc.bR(bF.ek);sm.cB=function(bf){this.cC(bf);this.bvE=!!bf.reset;this.Oy=parseInt(bf.delta)||0;this.is=bb.bD(bf.track);this.beW=bb.bD(bf.progress);this.de([[bf.thumb,"mousedown",this.bvD.bh(this)],[document,"mousemove",this.beY.bh(this)],[document,"mouseup",this.Su.bh(this)],[this.is,"mousedown",this.bvC.bh(this)]]);var iu=bf.value;if(iu==null){iu=this.beW.offsetWidth/this.is.offsetWidth}this.gn(iu)};sm.cL=function(){if(!!this.bvE)this.ME(0);this.cR()};sm.bvD=function(be){if(!!this.hE)return;bi.cr(be);this.hE=bi.nl(be);this.bfc=this.is.offsetWidth};sm.beY=function(be){if(!this.hE)return;var cw=bi.nl(be),dV=cw-this.hE;this.hE=cw;this.ME(this.Ba+dV/this.bfc);this.bN("onslidechange",{ratio:this.Ba})};sm.Su=function(be){if(!this.hE)return;this.beY(be);delete this.hE;delete this.bfc;this.bN("onslidestop",{ratio:this.Ba})};sm.bvC=function(be){var bvB=bb.lQ(this.is).x,bvA=bi.nl(be);this.ME((bvA-bvB+this.Oy)/this.is.offsetWidth);this.bN("onslidestop",{ratio:this.Ba})};sm.ME=function(iu){this.Ba=Math.max(0,Math.min(1,iu));bb.ch(this.beW,"width",this.Ba*100+"%")};sm.gn=function(iu){if(!!this.hE)return;this.ME(iu)};sm.Uv=function(iu){return this.Ba}})();
(function(){var bd=NEJ.P,fN=NEJ.R,bb=bd("nej.e"),bF=bd("nej.p"),bi=bd("nej.v"),bm=bd("nej.u"),bI=bd("nej.ut"),bC=bd("nej.j"),bJ=bd("nm.m"),ej=bd("nm.u"),bn=bd("nm.x"),bT=bd("nm.w"),bc,bP;bJ.EI=NEJ.C();bc=bJ.EI.prototype;bc.dv=function(){this.gR=location.parse(location.href).query;this.bs=bb.bD("player");this.KO();this.bEC();this.df();this.Xo();this.bED();this.bEE();this.ee.mZ(.8)};bc.KO=function(){var nr=bb.gG("audio"),eg=nr.canPlayType&&nr.canPlayType("audio/mpeg")?ej.Gh:ej.AP;this.ee=eg.bG({onstatechange:this.hx.bh(this),onloadprogress:this.tB.bh(this),onplayprogress:this.qq.bh(this)})};bc.bEC=function(){if(this.gR.height==32){this.dz="player-sm"}else if(this.gR.height==66){this.dz="player-mid"}else if(this.gR.height==90){this.dz="player-bg"}else{this.dz="player-list"}if(this.gR.bg){bb.ch(document.body,"background","#"+this.gR.bg)}this.bs.innerHTML=bb.jn(this.dz)};bc.df=function(){this.pq=bb.bD("cover");this.km=bb.bD("title");this.Ae=bb.bD("bar");this.jS=bb.bD("time");this.iD=bb.bD("prev");this.CJ=bb.bD("next");this.gu=bb.bD("play");this.bcc=bb.bD("pause");this.bNL=bb.bD("open");this.cN=bb.bD("list");this.wX=bb.bD("list-box");this.Cm=bb.bD("loading");this.bca=bb.bD("ctrl-box");this.bbM=bb.bD("sm-mid");this.bbH=bb.bD("mid-ctrl");bi.bv(this.bs,"click",this.cO.bh(this));bi.bv(document,"mouseout",this.Fa.bh(this));bi.bv(window,"resize",this.zJ.bh(this));bi.bv(window,"beforeunload",this.bEL.bh(this))};bc.Xo=function(){var bk=bb.bS(this.Ae,"j-flag");this.qS=bI.zc.bG({track:this.Ae,thumb:bk[1],progress:bk[0],onslidechange:this.TF.bh(this),onslideStop:this.Su.bh(this)})};bc.bED=function(){if(!this.cN)return;var bk=bb.bS(this.cN,"j-flag");this.hD=bT.uo.bG({content:this.wX,slide:bk[1],track:bk[0],speed:5})};bc.bEE=function(){var bEM={0:"/api/playlist/detail",1:"/api/album/{id}",2:"/api/song/detail",3:"/api/dj/program/detail",4:"/api/dj/program/byradio?radioId={id}"},cg=bEM[this.gR.type];bC.cE(bn.Ch(cg,this.gR),{type:"json",query:{id:this.gR.id,ids:JSON.stringify([this.gR.id]),limit:1e4,offset:0},onload:this.bbx.bh(this),onerror:this.bbx.bh(this)})};bc.bbx=function(be){if(be.code==200){switch(parseInt(this.gR.type)){case 0:this.gq=be.result.tracks;this.km.innerHTML=bb.dh("title",{title:bm.eO(be.result.name)});this.FH(be.result.coverImgUrl);break;case 1:this.gq=be.album.songs;this.km.innerHTML=bb.dh("title",{title:be.album.name,sub:be.album.artist.name});this.FH(be.album.picUrl);break;case 2:this.gq=be.songs;var cn=be.songs[0],gN=[];bm.cz(cn.artists,function(qF){gN.push(qF.name)});this.km.innerHTML=bb.dh("title",{title:cn.name,sub:gN.join("/")});this.FH(cn.album.picUrl);break;case 3:this.gq=[be.program.mainSong];this.km.innerHTML=bb.dh("title",{title:bm.eO(be.program.name)});this.FH(be.program.coverUrl);break;case 4:if(be.programs&&be.programs.length){var eh=be.programs[0].radio;this.km.innerHTML=bb.dh("title",{title:bm.eO(eh.name)});this.FH(eh.picUrl);this.gq=[];bm.cz(be.programs,function(dy){if(dy.mainSong){dy.mainSong.name=dy.name;dy.mainSong.artists=[{name:eh.name}];this.gq.push(dy.mainSong)}},this)}break}this.bEP();if(parseInt(this.gR.auto)){this.xa(0)}this.zJ();this.mn();if(this.hD)this.hD.ng()}else{alert("资源加载失败")}};bc.xa=function(bt){bt=parseInt(bt)||0;if(bt>this.gq.length-1){bt=0}else if(bt<0){bt=this.gq.length-1}var bl=this.gq[bt];if(bl.status<0||bl.fee>0)return;this.ee.gx(bl.mp3Url);this.Ce=bt};bc.bEP=function(){window.setTimeout(function(){if((this.km.clientHeight||this.km.scrollHeight)>33){this.km.innerHTML='<marquee scrollamount="2" onmouseover="this.stop()" onmouseout="this.start()">'+this.km.innerHTML+"</marquee>"}}.bh(this),100)};bc.FH=function(ep){if(this.pq){this.pq.src=ep+"?param=90y90"}};bc.mn=function(){if(this.wX){bb.fL(this.wX,"song-list",{playIndex:this.Ce,songs:this.gq},{getArtist:bn.oj});this.zJ(true)}};bc.cO=function(be){var bj=bi.bZ(be,"d:action");switch(bb.bz(bj,"action")){case"play":if(typeof this.Ce=="undefined"){this.xa(0);this.mn()}else{this.ee.mQ()}break;case"pause":this.ee.hO();break;case"next":this.xa(this.Ce+1);this.mn();break;case"prev":this.xa(this.Ce-1);this.mn();break;case"playByIndex":this.xa(bb.bz(bj,"index"));this.mn();break;case"open":if(bb.cW(this.cN,"z-close")){bb.bM(this.cN,"z-close")}else{bb.bO(this.cN,"z-close")}break;case"home":window.open("http://music.163.com");break}};bc.TF=function(be){};bc.Su=function(be){if(be.ratio==1){this.xa(this.Ce+1);this.mn();return}this.ee.ou(be.ratio)};bc.hx=function(be){switch(be.state){case 1:bb.bO(this.gu,"f-hide");bb.bM(this.bcc,"f-hide");break;case 2:bb.bM(this.gu,"f-hide");bb.bO(this.bcc,"f-hide");break;case 4:this.xa(this.Ce+1);this.mn();break}};bc.tB=function(){};bc.qq=function(be){if(this.jS){this.jS.innerText="- "+bn.ni(be.duration-be.current)}this.qS.gn(be.current/be.duration)};bc.zJ=function(bES){var eB=document.body.clientWidth-20,eb=document.body.clientHeight-20;bb.kA(this.bs,{width:eB+"px",height:eb+"px"});if(this.bca){bb.ch(this.bca,"width",eB-20-90+"px")}if(this.wX){var bET=bb.bS(this.wX,"name"),bEU=bb.bS(this.wX,"by"),bpT=eB-68;bm.cz(bET,function(ox,bt){bb.ch(ox,"width",bpT*.7+"px");bb.ch(bEU[bt],"width",bpT*.3+"px");bb.ch(ox.parentNode,"width",eB-18+"px")});bb.ch(this.wX.parentNode,"height",eb-130+"px");bb.ch(this.cN,"height",eb-90+"px");if(this.hD&&!bES)this.hD.ng()}if(this.bbM){bb.ch(this.bbM,"width",eB-84+"px")}if(this.bbH){bb.ch(this.bbH,"width",eB-86+"px");bb.ch(this.Ae,"width",eB-86-44+"px");bb.ch(this.km,"width",this.km.parentNode.clientWidth-24+"px")}};bc.Fa=function(be){var dM=bi.nl(be),hq=bi.qx(be);if(dM<=0||hq<=0||dM>=document.body.clientWidth||hq>=document.body.clientHeight){bi.bN(document,"mouseup",be)}};bc.bEL=function(){this.ee.cr()};bb.dL("template-box");new bJ.EI})()